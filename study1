# 1. LAN과 WAN : 컴퓨터들은 왜 서로 연결되어야 할까?

- 컴퓨터가 발전되면서 다른 컴퓨터와 파일을 주고 받을 필요성이 생김
- 네트워크라는 것이 생겨남
- 가까운 거리 (학교, 사무실)에서는 Local Area Network를 사용하고, 멀리 떨어진 지역(도시, 국가 간)을 연결할 때는 Wide Area Network를 사용함.
- LAN은 거리가 짧지만 그만큼 속도가 빠르고 안정적이다.
- WAN은 LAN에 비해 속도가 느려도 훨씬 넓은 범위를 커버할 수 있다.

→ LAN과 WAN이 이어져서 전 세계를 묶은 것이 바로 인터넷이다. 

- Lan은 여러 스위치와 PC등을 이더넷 케이블로 연결하여 구성된 네트워크이다.
- 이 네트워크에는 라우터, 모뎀, 방화벽, 로드 밸런서 등의 네트워크 장치가 추가될 수 있다.

## LAN

### 중복링크

- 스위치 간 연결이 케이블 하나뿐이라면,
그 케이블이 끊어질 경우 네트워크 전체가 단절될 수 있다.
- 이를 방지하기 위해, 스위치 사이에 여러 개의 케이블을 병렬로 연결해 두면(중복링크)
하나의 링크가 고장 나도 나머지 링크를 통해 통신을 유지할 수 있다.

→ 고가용성 구조 (HA, High Availability)라고 하며 이는 네트워크의 다운타임을 최소할 수 있다. 

→ 하지만 중복링크는 루프를 만들 수 있다. 

### 브로드캐스트 루프의 발생

- LAN에서 중복링크를 만들면 스위치의 동작 방식으로 루프가 발생할 수 있다.
- 스위치는 방향이 아닌 포트단위로만 동작하기 때문에 프레임이 들어오면 목적지 MAC주소만 확인하고 그 주소가 속한 포트로만 프레임을 내보낸다.
- 이때 스위치는 처음에는 각 장치의 MAC주소를 모르기 때문에 IP주소로부터 MAC주소를 알아내는 ARP요청이라는 브로드캐스트 메시지를 이용해 MAC주소를 학습하게 된다.
- 브로드캐스트는 “받은 포트를 제외한 나머지 모든 포트로 프레임을 복사해서 전송”한다.
- 만약 두 개 이상의 스위치가 중복 링크로 연결되어 있다면 같은 브로드 캐스트가 다른 경로를 통해 되돌아오게 된다.
- 예를들어 스위치 1과 스위치2를 A, B라는 선으로 중복연결했다고 하자. (pc1 - switch1 = switch2 - pc2)
- pc1이 보낸 브로드캐스트를 스위치1이 받아서 A, B모두로 보낸다(포트단위로만 보내기 때문에) 스위치2가 A로 받은 프레임을 B로 보내고 , B로 받은 프레임을 A로 보내기 때문에(포트단위로만 보내기때문) 결과적으로 돌아오게 되는거고, 이렇게 반복이되면서 트래픽이 폭주가 될 수 있음.
- 결국 이 루프는 데이터가 소멸하지 않고 네트워크 내부를 계속해서 돌기때문에 트래픽이 너무많아져(트래픽 폭주) 전체 네트워크가 마비될 수 있다.

### STP(spannig tree protocol)

- 앞서 말한 이런 루프를 방지하기 위해 고급형 스위치에는 STP 기능을 추가시킨다.
- 루프를 자동으로 감지하고 중복된 경로중 일부를 대기상태로 만들어두고 메인링크가 오류가 발생하면 활성화하여 통신을 자동으로 복구하는 기능이다.

### VLAN (virtual LAN)

- 하나의 물리적인 LAN을 논리적으로 여러 개의 네트워크로 분리하는 기술
- LAN이 커질수록 모든 ARP 요청, 공지등이 전부 퍼지기 때문에 네트워크가 느려질 수 있고
- LAN안의 논리적으로 분할 된 곳으로 접속이 쉬워 보안문제가 발생하기 쉽고, 네트워크 변경시 관리가 어렵다는 단점이 있다.
- VLAN은 이것을 해결하기 위해 네트워크를 논리적으로 구분한다.
- 같은 스위치더라도 각각의 포트를 VLAN 단위로 그룹화 할 수 있다. 이렇게 설명하면 같은 VLAN그룹 포트끼리만 통신할 수 있고 다른 VLAN끼리는 통신이 차단된다.
- 이때 서로 다른 스위치라 하더라도 물리적으로 연결만 하면 vlan id가 같은 포트끼리만 통신이 되기는 한다. VLAN id가 다르거나 VLAN이 설정되지 않은 포트끼리와는 통신되지 않는다.
- VLAN그룹으로 나누기 위해서는 단말이 연결된 스위치의 각 포트들을 Access port로 설정해야한다. 그리고 나서 해당 포트에 VLAN ID를 부여하면  access port가 이 포트에 연결된 단말이 어떤 VLAN에 속하는지 스위치에게 알려줄 수 있다.
- 이렇게 하면 스위치는 내부적으로 브로드 캐스트나, 유니캐스트을 같은 Vlan id를 가진 포트끼리로만 전달하게 된다.
- 하지만 access포트는 프레임에 vlan태그를 따로 붙이지 않기 때문에 스위치 간 VLAN 정보가 전달되지 않음. 즉 서로 다른 스위치지만 같은 VLAN id를 갖는 경우에는 정확한 식별과 전달이 어려울 수 있다.
- 이때 VLAN태그를 붙여서 스위치끼리 VLAN ID정보를 유지하며 여러 VLAN 트래픽을 함께 전달하기 위해 Trunkport가 사용된다.
- 스위치는 다르지만 같은 VLAN그룹으로 통신해야하는 경우가 있을 수 있다.
이럴 때는 스위치간의 연결을 하는 포트를 트렁크 포트로 설정하여 각각의 VLAN을 태그로 구분해 전송함으로써 , 수신하는 스위치가 해당 태그를 기반으로 VLAN 그룹을 식별하고 트래픽을 전달할 수 있다.
- 서로 다른 VLAN그룹끼리는 서로 다른 네트워크로 인식하기 때문에 L2스위치로는 통신이 불가능하며 통신할 때는 L3스위치 (라우터)가 중간에서 중계하며 이를 Inter-VLAN Routing이라고 한다.

## WAN

- LAN 과 LAN을 먼 거리에서 연결한 네트워크
- 멀리 떨어진 네트워크 끼리의 연결을 위해서 중간에 통신회사를 통해 네트워크를 구축한다.
- 대표적으로 아래 3가지 방식으로 구분할 수 있다.

### 전용선 방식(Leased Line)

- 통신회선을 통신사업자로부터 임대하여 전송 전송로처럼 사용
- 항상 연결되어 있는 **고정된 경로(Point-to-Point)** 를 이용
- 통신 품질이 높고 안정적이지만, **비용이 매우 높다**
- 주로 **기업 본사 ↔ 지사**, **은행망**, **보안망** 등에 사용됨

### 회선교환 방식(Circuit switched)

- 통신이 필요한 순간에만 **회선을 임시로 설정**하고,
    
    통신이 끝나면 **회선을 회수(해제)** 하는 방식
    
- 즉, **통신 중에는 물리적으로 한 회선이 독점됨**
- 전화망(PSTN)이나 초기 모뎀 통신이 대표적 예시

### 패킷교환 방식(Packet Switched)

- 데이터를 **작은 단위(패킷)** 로 나누어 전송
- 각 패킷은 **독립적으로 최적의 경로를 선택**하여 전송되고,
    
    목적지에서 재조립되어 원본 데이터를 복원
    
- 회선을 여러 사용자가 **공유**하므로 효율적이고 저렴
- 데이터가 연속적으로 전송되는게 아니라 독립적인 조각단위로 네트워크를 이동한다.

→ 현재 인터넷은 100% 패킷교환방식 기반으로 동작한다.

# **2. NIC :** 컴퓨터들은 어떻게 신호를 주고받을까?

NIC는 컴퓨터가 네트워크에 연결되어 데이터를 주고받을 수 있도록 해주는 장치이며,
OSI 1~2계층에서 물리 신호 변환과 MAC 주소 기반 통신을 담당한다.

| **OSI 계층** | **NIC의 역할** |
| --- | --- |
| **1계층 (물리 계층)** | 데이터를 전기 신호, 광 신호, 무선 신호로 변환하여 송출 (전기신호 ↔데이터) |
| **2계층 (데이터 링크 계층)** | MAC 주소 기반으로 프레임을 구성하고 송수신 **** |

## **NIC의 주소체계**

- **MAC 주소(Media Access Control Address) :** NIC에 **고유하게 부여된 48비트 주소**, 제조 단계에서 ROM에 저장됨. → NIC 교체 시 MAC 주소가 달라짐.
    
    예: 00-1A-2B-3C-4D-5E (8비트씩 6부분 → 16진수 2개씩 6부분)
    
- 네트워크 내에서 **“이 NIC가 누구인지”** 구분할 때 사용.
- 같은 네트워크 내에서는 IP보다 MAC이 우선적으로 동작 (ARP 통해 매핑).

## 확장

- 기존의 NIC가 단순히 컴퓨터가 네트워크에 연결되도록하는 장치였지만, 서버가상화, 클라우드, 고속 네트워크 환경이 등장하면서 여러 기능과 형태로 확장됨.

### [1] Multi-NIC

- 한 컴퓨터나 서버에 두 개 이상의 NIC를 장착해 운영하는 구조.
- 노트북도 유선, 무선 NIC를 가지고있으므로 다중 NIC구조이다.
- 트래픽 분산이 필요하거나 고가용성을 서버등은 다중 NIC를 사용한다.

### [2] vNIC (Virtual NIC)

- 가상머신 또는 컨테이너에 부여되는 가상의 NIC이며 물리적인 카드가 아니라 소프트웨적으로 에뮬레이션 된 인터페이스 카드이다.
- 하이퍼바이저가 여러개의 가상머신을 관리하면서  여러 VM이 하나의 물리 NIC를 공유하도록 하기 위해 등장했다.
- 각 VM은 자신만의 MAC 주소와 IP 주소를 가지며, 물리 NIC를 통해 실제 LAN에 연결됨.
- 물리 NIC(pNIC) ↔ 가상 스위치(vSwitch) ↔ vNIC(VM 내부)

vNIC의 주요연결모드 3가지. 

| **모드** | **설명** |
| --- | --- |
| **NAT 모드 (Network Address Translation)** | VM이 외부 네트워크에 직접 노출되지 않고, **호스트의 IP를 통해 외부와 통신**함. |
| **Bridged 모드** | VM이 실제 LAN에 직접 연결된 것처럼, **호스트와 같은 네트워크 대역**을 사용함. |
| **Host-Only 모드** | VM ↔ Host 간 통신만 가능, 외부 인터넷 연결은 없음. |

**[2.1] NAT 모드**

- vNIC이 하이퍼바이저의 **가상 NAT 라우터** 뒤에 위치
- VM 내부 IP는 **가상 사설 IP (예: 10.x.x.x, 192.168.x.x)**
- 외부로 나갈 때 하이퍼바이저가 **호스트 IP로 변환 (NAT 수행)**
- 실제 외부에서는 “호스트가 통신하는 것처럼” 보임

**[2.2] Bridged 모드**

- vNIC이 호스트의 물리 NIC(Ethernet)에 직접 연결된 것처럼 동작
- VM은 실제 LAN에 있는 다른 장치들과 동일한 IP 대역을 가짐 (스위치에 직접 꽂혀 있는 실제 장치처럼)
- **NAT 없이** 외부 네트워크와 직접 통신 가능

**[2.3] Host-Only 모드일**

- vNIC이 호스트와만 통신 가능
- 인터넷 접속 없음
- 테스트용, 내부 개발 환경 등에 사용

### [3] OCP NIC

- **OCP(Open Compute Project)** 는 Meta(구 Facebook), Google, Microsoft 등이 주도하는
    
    **오픈소스 하드웨어 표준화 프로젝트**로, 이 프로젝트의 규격을 따른 네트워크 카드가 **OCP NIC** 입니다.
    
- 기존의 NIC는 전통적으로 서버마다 NIC 형태/장착 위치/커넥터 방식이 제각각이라 벤더마다 전용 카드만 끼워야 했음
- 또한 교체하려면 서버 뚜껑 열고 작업해야 하고 유지보수가 귀찮았음

→ “즉, 서로 다른 제조사의 카드라도 같은 규격으로 쓸 수 있게 만들자.

• OCP NIC 3.0은 NIC을 서버 앞쪽(또는 뒤쪽)에서 “모듈처럼 쑥 빼고 꽂는” 구조. (분해 X)

그래서 트래픽 업그레이드(25G → 100G → 400G 등)도 빠르게 할 수 있음.

•OCP NIC 3.0은 “카드 크기부터 커넥터, PCIe 레인 수, 냉각, 관리 인터페이스까지 통일한 서버용 NIC 모듈 표준”이다.

# **3. MAC / IP 주소 :** “수많은 장치 중에서 누구에게 데이터를 보내야 할까?”

![image.png](attachment:269bc780-bab7-4643-a18c-f215369e9e2d:image.png)

## MAC(Media access Control) address

- NIC가 제조될 때 하드웨어 안에 영구적으로 새겨져 있는 식별자이다.
- 물리적으로 그 장치를 고유하게 식별하기 위한 하드웨어 주소
- NIC안에 MAC주소가 저장되어있지만 NIC가 꺼져있거나, 비활성화되면 네트워크 상에서는 감지하지 못함.
- 같은 LAN안에서 누가 누구인지를 구별함
- 48비트(6파이트) → 16진수 6쌍으로 표현
- 와이파이, 이더넷 등 대부분의 IEEE 802 기반 네트워크에서 사용

## IP  (Internet Protocol) address

- 네트워크 상에서 장치를 논리적으로 구분하기 위한 위치 정보이다.
- 논리적 위치 : 네트워크 상의 주소 공간 내 위치
- 반드시 인터넷이 아니어도 됨. 사설 네트워크 안에서도 IP주소는 존재함.

→ 어떤 형태의 네트워크든 그 내부에서 통신하려면 반드시 필요함

- 라우터가 해석할 수 있는 논리적 경로 정보. (라우터 입장에서 어떤 네트워크로 가야하는지 IP를 보고 판단)
- 같은 스위치에 물리적으로 연결되어 있어도 IP 주소의 네트워크 ID가 다르면 논리적으로 다른 위치에 있는 것.
- 예)

![image.png](attachment:aac6f7e8-f01b-4945-8274-c96346c2d574:8181a90c-7fd6-4334-b26f-8d3ead32c3be.png)

- IPv4, IPv6 두 버전이 존재한다.

### IPv4

- 32비트 길이의 주소 (10진수로 4개 그룹)
- 주소할당은 수동이나 DHCP로 가능
- 브로드캐스트 지원
- IPSec등의 보안은 선택적
- 주소가 부족하기 때문에 NAT기술 활용

### IPv6

- 128 비트 길이의 주소 (16진수 8개 그룹)
- 주소할당은 자동설정 가능
- 브로드캐스트 대신 멀티 캐스트 사용
- 보안은 기본내장
- 주소공간이 매우 넓기 때문에 NAT 불필요

### 공인 IP (Public IP)

- 전 세계에서 유일한 주소
- 인터넷 상에서 직접 통신 가능
- ISP가 할당

### 사설 IP (Private IP)

- LAN에서만 사용되는 주소
- 인터넷에서 직접 사용불가 ( 인터넷이 아닌 내부 통신을 위한 논리적 주소)
- 공인 IP 부족 문제 해결 →  NAT로 인터넷 사용가능
- 논리적 주소를 식별하기 위해 IP주소를 사용하지만 전부 공인 IP를 사용하면 주소가 너무 부족함(43억개초과) 그래서 사설 IP를 사용.

### 루프백 주소

- 자기 자신을 가리키는 IP
- 127.0.0.1 (IPv4)
- ::1(IPv6)

### 서브넷 마스크

- 네트워크 부분과 호스트 부분을 구분하는 정보
- 서브넷 마스크를 통해 같은 네트워크인지 판단하고, 라우터가 경로 결정함
- 예 ) /24 → 255.255.255.0 : 앞의 24비트는 네트워크 ID이다.

### 게이트웨이(Gateway)

- 다른 네트워크로 나가는 출입구
- 서로 다른 네트워크 간의 통신을 중계해주는 출입구 장치.

→ 내 PC가 속한 로컬네트워크와 외부의 다른 네트워크 사이를 이어주는 첫 번째 관문이다. 

- 예를들면 우리집 현관문 같은 것.
- 보통은 라우터의 IP 주소

# **4. OSI 7계층 :** 이 복잡한 통신 과정을 어떻게 체계적으로 이해할 수 있을까?

- 복잡한 네트워크 통신 과정을 기능별로 추상화해서 이해하기 쉽고, 설계하기 쉬운 구조로 만든 모델
- 과거에는 제조사마다 통신 방식이 달라서 장치간 호환이 어려웠기 때문에 네트워크 확장이 불가능했다.
- 그래서 ISO가 통신 과정 전체를 7단계로 나눈 표준 모델을 제안함 → OSI 7 Layer Model.
- 실제로 사용된다기 보다는 통신의 흐름을 설명하고 문제를 분석하는 이론적 모델

## 계층 순서

![image.png](attachment:2be90c1d-a8ef-49f4-af9f-2fed2974e5cb:image.png)

- 송신 측에서는 아래로 내려가고, 수신측에서는 위로 올라오는 구조

## 계층 별 특징

### 물리 계층

- 전기적, 기계적, 기능적인 특성을 이용해서 통신 케이블로 데이터를 전송
- 통신단위는 비트이며 1과 0으로 나타내어지고 전기적으로는 On, Off이다.
- 어떤 데이터인지, 어떤 에러가 있는지는 신경 안 씀
- 전기적인 신호로 변환해서 주고받기만 함.
- 리피터, 허브, 통신케이블

### 데이터 링크 계층

- 물리 계층을 통해 송수신되는 데이터의 오류도 찾아주고 재전송도 하는 기능
- MAC주소를 가지고 통신
- 통신단위는 프레임
- 브리지, 스위치등이 동작하며 직접 이어진 곳에서만 연결할 수 있다.

### 네트워크 계층

- 데이터를 목적지까지 가장 안전하고 빠르게 전달하는 계층(라우팅)
- 라우팅 하는 기술이 다양함
- 경로를 선택하고, 주소를 정하고 경로에 따라 패킷을 전달해주는 계층
- 다양한 길이의 데이터들 네트워크를 통해 전달하고, 그 과정에서 전송 계층이 요구하는 서비스품질(Qos)를 제공하기 위한 기능적, 절차적 수단을 제공한다.
- 대표적인 장비는 라우터
- 라우팅, 논리주소지정, 패킷전달, 인터네트워킹,단편화(Fragmentation)을 진행

→ 주소와 경로를 다룸

### 전송 계층

- 종단 간 데이터 전송을 담당하며, 신뢰성, 흐름제어, 오류제어, 포트 기반 통신등을 수행하는 계층이다. (종단 간 통신)
- 출발지 응용 프로그램과 목적지응용 프로그램의 논리적 연결을 제공
- 응용 게층에서 받은 긴 데이터를 세그먼트 단위로 나누어 전송, 수신측에서 이를 다시 조립(세그멘테이션 및 리어셈블)
- 손상되거나 누락된 세그먼트는 재전송 (오류제어)
- 송신측이 너무 빠르게 보내 수신측이 처리하지 못하는 상황을 방지 (흐름제어)
- 다수의 응용프로그램이 동시에 통신할 수 있도록 포트 번호로 구분 (포트 주소 지정)
- 전송중 순서가 뒤 바뀐 세그멘트를 시퀀스 번호로 재정렬 (순서제어)
- TCP 3-way handshake로 연결하고, 종료시에는 4-way handshake 수행
    - TCP에서 3-way handshake가 끝나면 연결이 성립되었다고 보는 이유는 이과정이 통신을 시작하기 위한 상호 준비 상태와 초기 설정을 보장하기 때문이다.
    - TCP는 3계층의 불확실한 네트워크 위에서 신뢰성을 구현하는 프로토콜이다.
    - 연결이 확립된 상태가 있어야만 그 이 후의 신뢰성 메커니즘이 제대로 작동할 수 있는 기반이 됨.
    - TCP 커넥션은 양 끝단이 서로의 상태를 기억하고, 통신을 유지, 관리하는 약속이다. 데이터를 보낼 준비 상태를 상호가 서로 인지하고 있는 관계이다.
    - 궁금중 : 세그먼트게 시퀀스 번호 붙여서 그냥 보내고 수신자가 알아서 조립만 하면 되는거 아닌가? → 커넥션이 없다면 송신자는 수신측이 진자 존재하는지, 지금 받을 준비가 되어있는지 모름. → 불필요한 세그먼트를 계속 보낼 수도 있고, 상대방이 죽어있는지도 모름 → 3-way handshake로 서로 살아있고, 통신 가능함을 확인한 뒤데이터 전송 시작
    - 순서보장, 오류, 검출및 재전송, 흐름 제어, 혼잡 제어, 연결 종료시 데이터 유실방지 등을 위해 TCP 커넥션이 필요한 것
    - 그리고 한 번 커넥션을 하고 데이터를 한 번에 보내는 이유는 매번 연결을 새로 맺으면 데이터를 몇 번까지 보냈고, 상대는 몇번까지 받았는지, 상대 버퍼는 얼마나 남았는지, 지금 네트워크가 얼마나혼잡한가등을 매번 0부터 리셋됨.
    - 만약 헤더만 존재했다면 잘받고 이런건 할 수 있어도 이전 데이터가 어떤 세그먼트에 대한 건지 기억이 없음.  연결이있다면 과거의 헤더정보를 기억해서 다음 행동을 결정할 수 있다.
    - 3-way handshake가 끝난 순간 서버와 클라이언트 양쪽 운영체제 내부에 TCP 연결 상태를 저장하는 공간이 만들어짐. (상태 정보 구조체)
    - 소켓 ID, 상태, 송신 버퍼, 수신 버퍼, 시퀀스 정보, 타이머등등

### 세션 계층

- 통신하는 프로그램 간 서로 대화를 시작하고, 유지하며, 종료할 수 있도록 논리적인 연결을 관리하는 계층이다.
- 데이터 통신을 위한 대화(대화의 문맥, 상태)를 관리하는 계층
- TCP가 데이터를 잃지 않게 운반한다면 셰션계층은 대화가 어디서 시작되고 어디서 끊겼는지를 기억한다.
- 서버와 클라이언트가 지금 서로 어떤 대화를 주고 받았는가?

[주요기능]

- 세션설정 : 통신 시작시 대화시작을 관리 (로그인, 인증등)
- 세션 유지 : 대호가 중단되지 않도록 유지 (네트워크 오류 발생시 재시작가능)
- 세션 종료 : 모든 통신이 끝나면 세션을 정상적으로 종료
- 동기화 : 데이터 전송 중 끊기면 복구할 수 있도록 체크포인트 설정
- 대화제어 : 통신 방향 제어 (단방향, 반이중, 전이중)

### 표현 계층

- 응용 프로그램 간에 주고받는 데이터의 형식, 인코딩, 암호화 방식 등을 통일 시켜 서로 다른 시스템 간에도 이해 가능한 형태로 표현되도록 해주는 계층
- 같은 말을 다르게 쓰는 두 컴퓨터가 서로 알아듣게 통역해주는 층
- 표현계층이 왜 필요한가? → 한쪽은 ASCII, 다른쪽은 UTF-8인코딩 이럴 때 데이터를 그대로 전송하게 되면 문자가 깨지거나, 바이너리 값 뒤바뀜, 해석 불가 같은 문제가 생김.
- 이떄 표현 계층에서 데이터를 공통 표준 형식으로 변환하고 복원해줌.

[주요기능]

- 데이터 형식 변환 : 포맷 통일 (ASCII ↔ EBCDIC)
- 데이터 압축 : 전송 효율을 높이기 위해 데이터 압축(JPEG, MPEG, ZIP)
- 데이터 암호화/복호화 : 데이터 보안을 위한 암호화 (SSL/TLS, HTTPS)
- 코드 변환 : 문자나 숫자 코드 체계 변환(float ↔ integer, binary ↔ text)
- 문맥 관리 : 응용간 데이터 표현 규칙을 합의 (MIME 타입 협상 (text/html, image/png 등)

[예시로 이해하기]

![image.png](attachment:1ce65938-91ab-4360-a330-ea61348bdf33:image.png)

### 응용 계층

- 사용자가 네트워크를 통해 데이터를 주고 받을 수 있도록 프로그램을 제공하는 계층
- 실제 서비스가 동작하는 부분
- 사용자가 실제로 사용하는 네트워크 서비스의 집합

[역할]

- 사용자와 네트워크의 인터페이스 제공 → 응용 프로그램이 네트워크 기능을 쉽게 사용할 수 있도록 API및 프로토콜 제공
- 데이터 생성 및 요청 → 사용자의 요청을 기반으로 데이터 생성(웹이메일등)
- 서비스별 프로토콜 정의 :→ 각 서비스가 서로 통신할 수 있도록 표준 규칙 제공
- 하위 계층 호출 : 표현, 세션 계층을 통해 데이터 변환과 연결유지
- 자원 접근 및 파일 전송 : 파일, 이메일, 원격 로그인 등 고수준 기능 제공

## 캡슐화 (Encapsulation)

- 데이터를 상위 계층에서 하위 계층으로 내려보낼 때 각 계층이 자기만의 헤더를 붙여서 다음 계층에 넘기는 과정.
- 7계층에서 6계층으로 갈 때 7계층 헤더를 앞에 추가
- 6계층에서 5계층으로 갈 때 6게층 헤더를 앞에 추가……..

### 캡슐화가 왜 필수인가?

- 계층 독립성 : 설계가 깔끔해지고 기술 교체가 쉬움(셀룰러에서 와이파이로 변경되어도 HTTP는 그대로 동작)
- 라우터, 스위치, 호스트의 역할 분리가 가능해짐 (스위치는 MAC만 보고 라우터는 IP만 보고, 서버는 TCP, HTTP만 봄

→ 즉 서로 다른 장비들이 서로 다른 책임을 지기 때문에 네트워크가 커져도 유지보수가 쉬워짐.

- 보안, 신뢰성, 품질제어를 계층별로 붙일 수 있음  (암호화는 6계층, 라우팅은 3계층..)

→ 각  기능을 어느 게층에서 해결할지를 설계할 수 있음.

- 결국 캡슐화가 없으면 헤더가 없는거니까 데이터 어디로 가야할지, 누구하네 가야할지, 어떤 파일인지 알지 못하게 됨. 의미없는 비트 덩어리.

## 역캡슐화 (Decapsulation)

- 수신측에서는 하위계층에서 상위계층으로 올라가면서 헤더를 빼는 과정

[흐름예시]

1. NIC(랜카드)가 전기/무선 신호(비트)를 받음
2. 프레임 단위로 복원하고, MAC 주소를 보고
    
    “이 프레임은 나한테 온 거네?” 하고 헤더/트레일러 제거
    
    → IP 패킷만 위로 넘김
    
3. IP 계층에서 IP 헤더를 보고
    
    “이 IP는 나네?” 하면 헤더 제거
    
    → TCP 세그먼트만 위로 넘김
    
4. TCP 계층에서 포트 번호/시퀀스 번호 보고
    
    올바른 프로세스(예: 웹브라우저 소켓)로 전달
    
    → 응용 데이터만 위로 넘김
    
5. 응용 계층에서 내용(HTML, JSON 등)을 실제로 사용/display

## OSI 7계층의 장점

- 제조사, 운영체제, 언어가 달라도 통신 가능
- 한 계층의 수정이 전체 시스템에 영향이 적음
- 어느 계층에서 문제가 났는지를 단계별로 파악
- 복잡한 통신을 단계별로 시각화 가능.

# **5. TCP/IP 모델 :** 이론적인 OSI 모델이 실제 인터넷에서는 어떻게 적용될까?

- 실제 인터넷에서 데이터가 이동하는 4단계 통신 구조이다.
- OSI 7계층의 이론을 실제 인터넷 통신에 적용한 구현 모델
- 핵심 프로토콜인 TCP와 IP를 중심으로 만들어짐.
- OSI 7계층보다 단순하지만, 역할은 그대로 포함되어 있음.

![image.png](attachment:3183a67d-9fa6-4613-b23e-b7bc6c5cb8da:image.png)

## 응용 계층

- OSI의 5~7계층에 해당
- 사용자 서비스 제공
- 사용자가 직접 사용하느 서비스가 존재하는 계층임.

[기능]

- 사용자와 네트워크 간 인터페이스 제공 (웹, 이메일, 파일전송등)
- 요청/응답 구조 통신 (HTTP 요청/응답)
- 데이터 포맷, 인코딩, 압축, 암호화 수행(SSL/TLS, MIME등)

## 전송 계층

- OSI의 4계층에 해당
- 신뢰성 있는 종단간 데이터 전송
- 애플리케이션(프로그램)간의 논리적 연결을 관리
- 오류제어, 흐름제어, 재전송 등 신뢰성 기능을 수행

[기능]

- 세그멘테이션 : 응용 데이터 분할 및 재조립
- 흐름제어/ 혼잡제어 : 송신 속도와 네트워크 상태 조정
- 오류제어 : 손실된 데이터 재전송
- 포르 번호 관리 : 여러 응용프로그램 간 통신 구분

## 인터넷 계층

- OSI의 3계층에 해당
- IP 주소 기반의 경로 설정 및 라우팅
- 데이터를 목적지 네트워크로 전달하기 위한 라우팅과 주소지정계층
- 네트워크 간 이동과 식별을 위해 IP 주소 사용
- 패킷을 분할(fragmentation)하고 경로를 선택해 전송

[기능]

- IP 주소 지정 : 각 장치를 고유하게 식별
- routing : 최적의 경로 선택
- 패킷 분할 : MTU보다 큰 패킷 분리
- 오류처리 : 전송 오류 및 경로 문제 보고 (ICMP)

## 네트워크 접근 계층

- OSI의 1~2계층에 해당
- 실제 물리적 전송
- 데잍를 실제 물리적 매체로 전송하는 계층
- 프레임 단위로 변환 후 전기 신호나 무선파로 전달
- MAC주소 기반 통신

[기능] 

- 프레임 생성 및 전송 : IP 패킷을 프레임으로 캡슐화
- 물리 주소 지정 : MAC 주소 기반 전송
- 에러 검출(CRC) : 프레임 오류 검사
- 매체 접근 제어 (CSMA/CD, CSMA/CA) : 전송 충돌 방지

# **6. 프로토콜 :** 서로 다른 시스템은 어떻게 같은 언어로 대화할까?

- 통신 시스템 간에 데이터를 교환하는 방식을 정의하는 규칙과 절차의 집합
- 서로 다른 언어를 사용하는 사람들이 대화하기 위해 합의된 공통언어이자 통신 매뉴얼

→ 제조사나 운영체제가 다른 모든 장치들이 인터넷을 통해 원활하게 소통할 수 있음. 

## 프로토콜의 핵심 3가지 요소

### 1. 구문 (Syntax)

- 데이터 형식 , 인코딩, 신호 레벨등을 정의
- 데이터 패킷이 어떻게 생겼는지, 헤더가 몇 비트인지, 데이터를 바이너리로 어떻게 표현할지 등등

### 2. 의미 (Semantics)

- 제어 정보와 데이터의 의미, 그리고 그 의미에 따른 응답을 정의
- 이 패킷의 SYN 플래그 1이면 연결요청, 순서번호는 데이터의 어떤 부분을 가리키는지. 등등

### 3. 타이밍 (Timing)

- 통신이 언제, 얼마나 빨리 이루어져야 하는지를 정의
- 응답은 몇 초 안에 와야해?, 데이터를 전송하는 속도는 얼마로 제한해야 하는가?

## 프로토콜의 계층적 구조

- 복잡한 통신 과정을 효율적으로 관리하기 위해, 네트워크 프로토콜을 여러개의 계층으로 나누어 정의한다.
- 가장 널리 사용되는 모델은 TCP/IP 모델과 OSI 7계층 모델이다.

### 계층별 예시 프로토콜

- 응용 계층 : HTTP, FTP, SMTP, DNS, SSH, SNMP
- 전송 게층 : TCP, UDP
- 인터넷 계층 : IP, ICMP, IGMP, ARP, BGF, OSPF, RIP
- 네트워크 접근 계층 : 이더넷, wifi, PPP, MAC

# 참고자료

https://worlf.tistory.com/140

https://pak-j.tistory.com/30

https://wonisdaily.tistory.com/298

https://hanarotg.tistory.com/253

https://m.blog.naver.com/sknbiz070/223078079241

https://shlee0882.tistory.com/110

https://velog.io/@ksk0605/TCPIP%EC%9D%98-%EA%B0%9C%EB%85%90-%EC%98%AC%EB%B0%94%EB%A5%B4%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0

https://hpjang.tistory.com/4

# 질문

1.  스위치 간 연결선을 하나만 두면 그 선이 고장났을 때 네트워크가 분리될 수 있다. 그런 상황을 방지하기 위해 스위치간에 연결선을 2개이상 설치하는 중복링크를 만드는데, 이로 이해 발생하는 문제를  말하고, 그 문제가 발생하는 과정 브로드캐스트를 예시로 들어서 이야기하라. 또는 해당 문제를 해결하기 위해 사용하는 프토토콜과 방식은?
2.  TCP가 굳이 ‘연결’을 설정해야 하는 이유를 **송신자·수신자 상태 관리 관점**에서 논리적으로 설명하라.

(힌트: 커넥션이 없는 경우 발생할 수 있는 문제 2가지를 구체적으로 들어라.)

1. TCP의 연결 해제 방식이 왜 4-way인지 설명. 그리고 그와 비교해서 수립할 때는 왜 3-way인지 설명. 
2. TCP의 신뢰성 메커니즘 3가지

#
